<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 400">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- User Code box -->
  <rect x="240" y="10" width="120" height="40" rx="5" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="300" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#1976d2">User Code</text>

  <!-- Entry Point diamond -->
  <polygon points="300,80 360,110 300,140 240,110" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="300" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#e65100">Entry Point</text>

  <!-- Arrow from User Code to Entry Point -->
  <line x1="300" y1="50" x2="300" y2="78" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- api/dsl.py box -->
  <rect x="380" y="160" width="120" height="40" rx="5" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
  <text x="440" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#2e7d32">api/dsl.py</text>

  <!-- api/client.py box -->
  <rect x="100" y="160" width="120" height="40" rx="5" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
  <text x="160" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#2e7d32">api/client.py</text>

  <!-- Arrow from Entry Point to dsl.py -->
  <path d="M 330 125 Q 380 125 395 158" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="385" y="130" font-family="Arial, sans-serif" font-size="10" fill="#666">dsl.compute()</text>

  <!-- Arrow from Entry Point to client.py -->
  <path d="M 270 125 Q 220 125 205 158" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="175" y="130" font-family="Arial, sans-serif" font-size="10" fill="#666">client.query()</text>

  <!-- client.get box -->
  <rect x="30" y="230" width="100" height="35" rx="5" fill="#fce4ec" stroke="#c2185b" stroke-width="2"/>
  <text x="80" y="252" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#ad1457">client.get</text>

  <!-- Arrow from client.py to client.get -->
  <path d="M 130 200 L 100 228" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="85" y="215" font-family="Arial, sans-serif" font-size="9" fill="#666">auto-load</text>

  <!-- Arrow from client.py to dsl.py -->
  <line x1="220" y1="180" x2="378" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- parser._evaluate box -->
  <rect x="320" y="230" width="160" height="40" rx="5" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
  <text x="400" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#6a1b9a">parser._evaluate</text>

  <!-- Arrow from dsl.py to _evaluate -->
  <line x1="440" y1="200" x2="420" y2="228" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="455" y="220" font-family="Arial, sans-serif" font-size="9" fill="#666">auto-inject ops</text>

  <!-- SafeEvaluator box -->
  <rect x="320" y="295" width="160" height="40" rx="5" fill="#fff8e1" stroke="#ffa000" stroke-width="2"/>
  <text x="400" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#ff8f00">SafeEvaluator</text>

  <!-- Arrow from _evaluate to SafeEvaluator -->
  <line x1="400" y1="270" x2="400" y2="293" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Result DataFrame box -->
  <rect x="320" y="355" width="160" height="40" rx="5" fill="#e0f7fa" stroke="#0097a7" stroke-width="2"/>
  <text x="400" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#00838f">Result DataFrame</text>

  <!-- Arrow from SafeEvaluator to Result -->
  <line x1="400" y1="335" x2="400" y2="353" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
</svg>
