---
title: "Alpha Expressions"
execute:
  enabled: false
---

Learn to write multi-line expressions with variables.

```{python}
#| eval: false
from alphalab.api.client import AlphaLabClient
import os

data_path = os.environ.get("LOCAL_STORAGE_PATH", "/path/to/your/data")
client = AlphaLabClient(data_path=data_path)

# Use a small subset for tutorials
SYMBOLS = ["AAPL", "MSFT", "GOOGL", "AMZN", "META", "NVDA", "TSLA", "JPM", "V", "JNJ"]
START = "2024-01-01"
END = "2024-12-31"
```

## Single-Line Expressions

```{python}
#| eval: false
# Daily returns (pre-computed field)
daily_returns = client.query("returns", symbols=SYMBOLS, start=START, end=END)
print(daily_returns.head())
```

```{python}
#| eval: false
# Volume momentum (is today's volume higher than average?)
volume_delta = client.query("ts_delta(volume, 5)", symbols=SYMBOLS, start=START, end=END)
print(volume_delta.head())
```

## Multi-Line with Variables

Use semicolons to separate statements.

```{python}
#| eval: false
# 20-day momentum, ranked
alpha = client.query("rank(ts_delta(close, 20))", symbols=SYMBOLS, start=START, end=END)
print(alpha.head())
```

## Intermediate Variables

Store intermediate results for cleaner code.

```{python}
#| eval: false
# Scale signal to sum to 1
alpha = client.query("scale(rank(ts_delta(close, 5)))", symbols=SYMBOLS, start=START, end=END)
print(alpha.head())
```

## Combining Signals

Add multiple ranked signals together.

```{python}
#| eval: false
# Combine momentum at different windows
alpha = client.query(
    "scale(rank(ts_delta(close, 5)) + rank(ts_delta(close, 20)))",
    symbols=SYMBOLS, start=START, end=END
)
print(alpha.head())
```

## Next Steps

- [Quickstart](01_quickstart.qmd) — Basic AlphaLab usage
- [Group Operations](03_group_operations.qmd) — Sector-relative operations
- [Standalone DSL](04_standalone_dsl.qmd) — Use DSL with your own DataFrames
